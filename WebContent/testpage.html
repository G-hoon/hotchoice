<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="https://apis.skplanetx.com/tmap/js?version=1&format=javascript&appKey=d0f174d7-0cad-33aa-946f-31dd83937dfd"></script>
        <script type="text/javascript">
        function initTmap(){
            centerLL = new Tmap.LonLat(14145677.4, 4511257.6);
            map = new Tmap.Map({div:'map_div',
                                width:'100%', 
                                height:'400px',
                                transitionEffect:"resize",
                                animation:true
                                //minZoom:10, maxZoom:14
                            }); 
            var sx1 = 14129105.461214;
            var sy1 = 4517042.1926406;
            var ex1 = 14136027.789587;
            var ey1 = 4517572.4745242;
            searchRoute(sx1, sy1, ex1, ey1);
            map.events.register("click", map, onClickMap);
        };
      

        
        function onClickMap(evt){
            console.log("type = "+evt.type);
            console.log("clientX = "+evt.clientX);
            console.log("clientY = "+evt.clientY);
        }
        //경로 정보 로드

        function searchRoute(sx, sy, ex, ey){
            var routeFormat = new Tmap.Format.KML({extractStyles:true, extractAttributes:true});
            var startX = sx;
            var startY = sy;
            var endX = ex;
            var endY = ey;
            var urlStr = "https://apis.skplanetx.com/tmap/routes?version=1&format=xml";
            urlStr += "&startX="+startX;
            urlStr += "&startY="+startY;
            urlStr += "&endX="+endX;
            urlStr += "&endY="+endY;
            urlStr += "&appKey=d0f174d7-0cad-33aa-946f-31dd83937dfd";
            var prtcl = new Tmap.Protocol.HTTP({
                                                url: urlStr,
                                                format:routeFormat
                                                });
            var routeLayer = new Tmap.Layer.Vector("route", {protocol:prtcl, strategies:[new Tmap.Strategy.Fixed()]});
            routeLayer.events.register("featuresadded", routeLayer, onDrawnFeatures);
            map.addLayer(routeLayer);
        }
        //경로 그리기 후 해당영역으로 줌
        function onDrawnFeatures(e){
            map.zoomToExtent(this.getDataExtent());
            map.ctrl_nav.disableZoomWheel(); 
        }

        </script>
    </head>
    <body onload="initTmap()">
<div id="map_div"></div>
</body>
</html>